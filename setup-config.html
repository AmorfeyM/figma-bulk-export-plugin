<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Figma Plugin</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .setup-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        input[type="text"], input[type="url"], textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: monospace;
            box-sizing: border-box;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        .key-input {
            font-size: 12px;
            background: #f8f9fa;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin-right: 10px;
        }
        button:hover { background: #0056b3; }
        button.success { background: #28a745; }
        button.success:hover { background: #218838; }
        button.test { background: #17a2b8; }
        button.test:hover { background: #138496; }
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-weight: 500;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.warning { background: #fff3cd; color: #856404; }
        .status.info { background: #d1ecf1; color: #0c5460; }
        .help-text {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
            line-height: 1.4;
        }
        .step {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #007bff;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        .step h3 {
            margin: 0 0 10px 0;
            color: #007bff;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
            border: 1px solid #e9ecef;
        }
        .generated-config {
            display: none;
            margin-top: 20px;
        }
        .copy-button {
            background: #6c757d;
            font-size: 12px;
            padding: 8px 12px;
        }
        .copy-button:hover { background: #5a6268; }
    </style>
</head>
<body>
    <div class="setup-container">
        <h1>üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Figma Plugin</h1>
        <p class="subtitle">
            –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–∫–∏.
            –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ Supabase Dashboard ‚Üí Settings ‚Üí API.
        </p>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
        <div class="step">
            <h3>üìã –ì–¥–µ –Ω–∞–π—Ç–∏ –¥–∞–Ω–Ω—ã–µ Supabase:</h3>
            <ol>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ <a href="https://supabase.com/dashboard" target="_blank">Supabase Dashboard</a></li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <strong>Settings ‚Üí API</strong></li>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
            </ol>
        </div>

        <!-- –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <form id="configForm">
            <div class="form-group">
                <label for="projectUrl">Project URL:</label>
                <input type="url" id="projectUrl" placeholder="https://your-project.supabase.co" required>
                <div class="help-text">URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞</div>
            </div>

            <div class="form-group">
                <label for="anonKey">anon public key:</label>
                <textarea id="anonKey" rows="3" class="key-input" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." required></textarea>
                <div class="help-text">–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</div>
            </div>

            <div class="form-group">
                <label for="serviceKey">service_role secret key:</label>
                <textarea id="serviceKey" rows="3" class="key-input" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." required></textarea>
                <div class="help-text">–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</div>
            </div>

            <div class="form-group">
                <label for="adminKey">–ê–¥–º–∏–Ω-–∫–ª—é—á –¥–ª—è –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</label>
                <input type="text" id="adminKey" placeholder="my-secure-admin-key-2024" required>
                <div class="help-text">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</div>
            </div>

            <div>
                <button type="button" onclick="testConnection()" class="test">üîç –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</button>
                <button type="button" onclick="generateConfig()" class="success">üíæ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥</button>
                <button type="button" onclick="downloadConfig()">üì• –°–∫–∞—á–∞—Ç—å config.js</button>
            </div>
        </form>

        <!-- –°—Ç–∞—Ç—É—Å -->
        <div id="status"></div>

        <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
        <div id="generatedConfig" class="generated-config">
            <h3>üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</h3>
            <button type="button" onclick="copyConfig()" class="copy-button">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <pre id="configOutput"></pre>
        </div>

        <!-- –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ -->
        <div class="step">
            <h3>üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</h3>
            <ol>
                <li><strong>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</strong> - –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ config.js</li>
                <li><strong>–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã</strong> - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ supabase-setup.md</li>
                <li><strong>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É</strong> - –æ—Ç–∫—Ä–æ–π—Ç–µ test-system.html</li>
                <li><strong>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–≥–∏–Ω</strong> - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ Figma</li>
            </ol>
        </div>
    </div>

    <script>
        let currentConfig = {};

        // –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        async function testConnection() {
            const projectUrl = document.getElementById('projectUrl').value.trim();
            const anonKey = document.getElementById('anonKey').value.trim();

            if (!projectUrl || !anonKey) {
                showStatus('–í–≤–µ–¥–∏—Ç–µ Project URL –∏ anon key –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                return;
            }

            showStatus('üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...', 'info');

            try {
                const response = await fetch(projectUrl + '/rest/v1/', {
                    method: 'HEAD',
                    headers: {
                        'apikey': anonKey,
                        'Authorization': `Bearer ${anonKey}`
                    }
                });

                if (response.ok) {
                    showStatus('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —É—Å–ø–µ—à–Ω–æ!', 'success');

                    // –¢–µ—Å—Ç —Ç–∞–±–ª–∏—Ü
                    setTimeout(async () => {
                        try {
                            const tableResponse = await fetch(projectUrl + '/rest/v1/subscriptions?select=id&limit=1', {
                                method: 'GET',
                                headers: {
                                    'apikey': anonKey,
                                    'Authorization': `Bearer ${anonKey}`,
                                    'Content-Type': 'application/json'
                                }
                            });

                            if (tableResponse.ok) {
                                showStatus('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –¢–∞–±–ª–∏—Ü–∞ subscriptions –Ω–∞–π–¥–µ–Ω–∞.', 'success');
                            } else {
                                showStatus('‚ö†Ô∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ subscriptions –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ supabase-setup.md', 'warning');
                            }
                        } catch (e) {
                            showStatus('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã.', 'success');
                        }
                    }, 1000);
                } else {
                    showStatus(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function generateConfig() {
            const projectUrl = document.getElementById('projectUrl').value.trim();
            const anonKey = document.getElementById('anonKey').value.trim();
            const serviceKey = document.getElementById('serviceKey').value.trim();
            const adminKey = document.getElementById('adminKey').value.trim();

            if (!projectUrl || !anonKey || !serviceKey || !adminKey) {
                showStatus('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏', 'error');
                return;
            }

            currentConfig = {
                projectUrl,
                anonKey,
                serviceKey,
                adminKey
            };

            const configContent = `// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Figma Plugin - –ê–í–¢–û–ì–ï–ù–ï–†–ê–¶–ò–Ø ${new Date().toISOString()}

const PLUGIN_CONFIG = {
  // Supabase –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  SUPABASE: {
    URL: '${projectUrl}',
    ANON_KEY: '${anonKey}',
    SERVICE_ROLE_KEY: '${serviceKey}'
  },

  // API Endpoints
  API: {
    VERIFY_SUBSCRIPTION: '/functions/v1/verify-subscription',
    YOOKASSA_WEBHOOK: '/functions/v1/yookassa-webhook',
    CREATE_PAYMENT: '/functions/v1/create-payment'
  },

  // YooKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞)
  YOOKASSA: {
    ENABLED: false,
    SHOP_ID: 'demo_shop_id',
    SECRET_KEY: 'demo_secret_key'
  },

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
  PLUGIN: {
    VERSION: '2.1.0',
    NAME: 'Figma Bulk Export by Sections',
    CACHE_DURATION: 7 * 24 * 60 * 60 * 1000, // 7 –¥–Ω–µ–π
    DEMO_MODE: false // –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
  },

  // –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
  PLANS: {
    monthly: { name: '–ú–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', duration: 30, price: 500, currency: 'RUB' },
    quarterly: { name: '–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', duration: 90, price: 1200, currency: 'RUB' },
    yearly: { name: '–ì–æ–¥–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', duration: 365, price: 4000, currency: 'RUB' }
  },

  // –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  MESSAGES: {
    SUBSCRIPTION_REQUIRED: '–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞',
    SUBSCRIPTION_EXPIRED: '–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞. –ü—Ä–æ–¥–ª–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã',
    DEVICE_ALREADY_USED: '–õ–∏—Ü–µ–Ω–∑–∏—è —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ',
    NETWORK_ERROR: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–ª–∞–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ',
    INVALID_LICENSE: '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–π –∫–ª—é—á –∏–ª–∏ email',
    SUCCESS_ACTIVATION: '–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!',
    YOOKASSA_DISABLED: '–ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.'
  },

  // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
  ADMIN: {
    ACCESS_KEY: '${adminKey}',
    ALLOWED_EMAILS: ['admin@yourcompany.com']
  }
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ URL API
function getApiUrl(endpoint) {
  return PLUGIN_CONFIG.SUPABASE.URL + PLUGIN_CONFIG.API[endpoint];
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
function getAuthHeaders(useServiceRole = false) {
  const key = useServiceRole ?
    PLUGIN_CONFIG.SUPABASE.SERVICE_ROLE_KEY :
    PLUGIN_CONFIG.SUPABASE.ANON_KEY;

  return {
    'Content-Type': 'application/json',
    'Authorization': \`Bearer \${key}\`,
    'apikey': key
  };
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function isConfigured() {
  const hasValidUrl = PLUGIN_CONFIG.SUPABASE.URL &&
                      !PLUGIN_CONFIG.SUPABASE.URL.includes('your-project-id') &&
                      PLUGIN_CONFIG.SUPABASE.URL.includes('.supabase.co');

  const hasValidAnonKey = PLUGIN_CONFIG.SUPABASE.ANON_KEY &&
                          !PLUGIN_CONFIG.SUPABASE.ANON_KEY.includes('your_anon_key') &&
                          PLUGIN_CONFIG.SUPABASE.ANON_KEY.startsWith('eyJ') &&
                          PLUGIN_CONFIG.SUPABASE.ANON_KEY.length > 100;

  const hasValidServiceKey = PLUGIN_CONFIG.SUPABASE.SERVICE_ROLE_KEY &&
                             !PLUGIN_CONFIG.SUPABASE.SERVICE_ROLE_KEY.includes('your_service_role') &&
                             PLUGIN_CONFIG.SUPABASE.SERVICE_ROLE_KEY.startsWith('eyJ') &&
                             PLUGIN_CONFIG.SUPABASE.SERVICE_ROLE_KEY.length > 100;

  return {
    isValid: hasValidUrl && hasValidAnonKey && hasValidServiceKey,
    details: {
      supabaseUrl: hasValidUrl,
      anonKey: hasValidAnonKey,
      serviceKey: hasValidServiceKey,
      yookassaEnabled: PLUGIN_CONFIG.YOOKASSA.ENABLED
    }
  };
}

// –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
async function testSupabaseConnection() {
  try {
    const response = await fetch(PLUGIN_CONFIG.SUPABASE.URL + '/rest/v1/', {
      method: 'HEAD',
      headers: getAuthHeaders()
    });

    return {
      success: response.ok,
      status: response.status,
      statusText: response.statusText
    };
  } catch (error) {
    return {
      success: false,
      error: error.message
    };
  }
}

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    PLUGIN_CONFIG,
    getApiUrl,
    getAuthHeaders,
    isConfigured,
    testSupabaseConnection
  };
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
if (typeof window !== 'undefined') {
  window.PLUGIN_CONFIG = PLUGIN_CONFIG;
  window.getApiUrl = getApiUrl;
  window.getAuthHeaders = getAuthHeaders;
  window.isConfigured = isConfigured;
  window.testSupabaseConnection = testSupabaseConnection;
}`;

            document.getElementById('configOutput').textContent = configContent;
            document.getElementById('generatedConfig').style.display = 'block';

            showStatus('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞! –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ config.js', 'success');
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function copyConfig() {
            const configText = document.getElementById('configOutput').textContent;
            navigator.clipboard.writeText(configText).then(() => {
                showStatus('üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
            }).catch(() => {
                showStatus('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –í—ã–¥–µ–ª–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.', 'error');
            });
        }

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function downloadConfig() {
            const configText = document.getElementById('configOutput').textContent;
            if (!configText) {
                showStatus('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é', 'error');
                return;
            }

            const blob = new Blob([configText], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'config.js';
            a.click();
            URL.revokeObjectURL(url);

            showStatus('üì• –§–∞–π–ª config.js —Å–∫–∞—á–∞–Ω!', 'success');
        }

        // –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = \`<div class="status \${type}">\${message}</div>\`;
        }

        // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–ª—è –¥–µ–º–æ
        window.addEventListener('load', () => {
            console.log('üîß –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            console.log('üìã –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Supabase Dashboard ‚Üí Settings ‚Üí API');
        });
    </script>
</body>
</html>
